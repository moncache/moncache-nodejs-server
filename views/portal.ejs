<!doctype html>
<html ng-app="coffeeway">
<head>
  <title ng-bind="'CoffeeWay :: ' + $root.title">CoffeeWay</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw==" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha256-KXn5puMvxCw+dAYznun+drMdG1IFl3agK0p/pqT9KAo= sha512-2e8qq0ETcfWRI4HJBzQiA3UoyFk6tbNyG+qSaIBZLyW9Xf3sWZHN/lxe9fTh1U45DpPf07yj94KsUHHWe4Yk1A==" crossorigin="anonymous"></script>

  <script type="text/javascript" src="https://linkshouse.herokuapp.com/js/angular-1.3.4.min.js"></script>
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.4/angular-route.js"></script>
  <script type="text/javascript">
    var coffeeway = angular.module('coffeeway', ['ngRoute']);

    coffeeway.run(['$location', '$rootScope', function($location, $rootScope) {
      $rootScope.$on('$routeChangeSuccess', function(event, current, previous) {
        if (current.hasOwnProperty('$$route')) {
          $rootScope.title = current.$$route.title;

          $rootScope.section = current.$$route.section;

          $('#navbar li.active').removeClass('active');

          $('#navigation-item-' + $rootScope.section).addClass('active');
        }
      });
    }]);

    coffeeway.controller('AppController', function($scope) {});

    coffeeway.controller('OfficesCtrl', function($scope, $location, $http) {
      $http.get('/offices').then(function(response) {
        $scope.offices = response.data.offices;

        return response.data.offices;
      });

      $scope.openForm = function() {
        $location.path('/offices/form');
      }
    });

    coffeeway.controller('ProductsCtrl', function($scope, $location, $http) {
      $http.get('/products').then(function(response) {
        $scope.products = response.data.products;

        return response.data.offices;
      });

      $scope.openForm = function() {
        $location.path('/products/form');
      }
    });

    coffeeway.config(function($routeProvider) {
      $routeProvider
      .when('/dashboard', {
        templateUrl: '/content/dashboard',
        controller: 'AppController',
        section: 'dashboard',
        title: 'Dashboard'
      })
      .when('/offices', {
        templateUrl: '/content/offices/list',
        controller: 'OfficesCtrl',
        section: 'offices',
        title: 'Offices'
      })
      .when('/offices/form', {
        templateUrl: '/content/offices/form',
        controller: 'AppController',
        section: 'offices',
        title: 'Office form'
      })
      .when('/products', {
        templateUrl: '/content/products/list',
        controller: 'ProductsCtrl',
        section: 'products',
        title: 'Products'
      })
      .when('/products/form', {
        templateUrl: '/content/products/form',
        controller: 'AppController',
        section: 'products',
        title: 'Product form'
      })
      .when('/orders', {
        templateUrl: '/content/orders/list',
        controller: 'AppController',
        section: 'orders',
        title: 'Orders'
      })
      .when('/orders/form', {
        templateUrl: '/content/orders/form',
        controller: 'AppController',
        section: 'orders',
        title: 'Order form'
      })
      .otherwise({
        "redirectTo": "/dashboard"
      });
    });
  </script>
</head>
<body>
   <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">CoffeeWay</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li id="navigation-item-dashboard"><a href="#dashboard">Dashboard</a></li>
            <li id="navigation-item-offices"><a href="#/offices">Offices</a></li>
            <li id="navigation-item-products"><a href="#/products">Products</a></li>
            <li id="navigation-item-orders"><a href="#/orders">Orders</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#/configuration"><b><%= configuration %></b></a></li>
        </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
      <div ng-view></div>
    </div> <!-- /container -->
</body>
</html>
